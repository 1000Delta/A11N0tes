# 根据需求创建索引

## 明确需求

索引名：link

数据类型名：webPage

字段：

- keyword 关键字
- title 标题
- url 地址
- picurl 图片地址
- intro 简介
- content 内容
- tags 标签
- note 备注

## 创建新索引

创建索引时需要指定主，副本分片数量

选择3个主分片，一个副本分片

并且同时创建url分析器，便于对url字段进行分析

```json
PUT /link
{
    "settings": {
        "index": {
            "number_of_shards": 3,
            "number_of_replicas": 1
        },
        "analysis": {
            "analyzer": {
                "url_analyzer": {
                  "type": "custom",
                  "tokenizer": "uax_url_email"
                }
            }
        }
    }
}
```

## 添加数据类型

```json
PUT /link/_mapping/webPage 
{
    "properties": {
        "keyword": {
            "type": "keyword",
             //"index": "not_analyzed" // 关键字不拆分分析
        },
        "title": {"type": "text"},
        "url": {
            "type": "text",
            "analyzer": "uax_email_urls" // 采用url分析方式
        },
        "picurl":{
            "type": "text",
        	"index": "no" // 图片url不可搜索，不索引
        },
        "intro": {"type": "text"},
        "content": {"type": "text"},
        "tags": {
            "type": "keyword",
            //"index": "not_analyzed" // 标签不拆分分析
        }, 
        "note": {"type": "text"}
    }
}


```

