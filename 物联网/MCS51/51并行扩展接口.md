# MCS-51单片机的并行扩展接口

## 总线并行扩展

### 总线并行扩展方法

一般用74LS373作为地址锁存器，输出的地址当ALE上升后有效，当ALE下降以后消失，因此可以使用ALE的负跳变将地址存入锁存器（P0口低8位）

## 存储器接口扩展

## I/O 并行接口扩展

可用于扩展的器件：

- 可编程并行接口[8255](../8255A.md)
- 三态门电路，锁存器 74LS377(373, 273)扩展输出，74LS244(245)扩展输入
- 可编程RAM / IO 扩展器 8155
- 利用串行口的移位寄存器工作方式（方式0）也可以扩展 I/O 口，此时扩展的 I/O 口不占用片外的 RAM 地址。

### 采用锁存器扩展并行 I/O 接口

#### 74LS377

74LS377是一种8D触发器。

- `G` 锁存端，在选通信号的下降沿将数据锁存。 

#### 74LS245

一种三态输出8总线收发器/驱动器，无锁存功能。

`DIR = 1` 时，A => B

`DIR = 0` 时，B => A

### 采用串行口扩展并行 I/O 接口

#### 74LS165

## D/A 转换器接口扩展

衡量 D/A 性能的主要参数：

- 分辨率
- 精度
- 转换时间
- 线性度
- 输出极性和范围

#### R-2R 梯形电阻网络

#### DAC0832

8位D/A芯片，片内带数据锁存器，电流输出。

- 8位输入锁存器
    - `D0 ~ D7` 输入数据
- 8位DAC寄存器
- 8位D/A转换电路
    - `V_REF` 基准电压输入线 -10 ~ 10V
    - `I_OUT1`
    - `I_OUT2`
- 转换控制电路

##### 工作方式

- 单缓冲方式
- 双缓冲方式
    - 先将数据写入锁存器（CS有效）
    - 同时选中各路寄存器（XFER有效），输出模拟量

## A/D 转换接口扩展

模拟量

- 电信号
- 非电信号 -> 传感器 -> 电信号

**主要参数**

- 分辨率
- 满刻度误差
- 转换速率
- 转换精度

**A/D种类**

- 逐次逼近式
- 双积分式

### ADC0809

- IN0~IN7 8路模拟量输入线
- A/B/C 通路选择输入线
- EOC 转换结束信号输出线，转换结束后EOC输出一个脉冲

## 显示及键盘接口扩展

### LED 显示器及接口

#### 显示器的显示方式

- 静态显示方式
    - 发光二极管恒定导通或截止，直到显示另一个字符为止
    - 显示时的亮度较高
    - 对i/o口的占用较多
- 动态显示方式
    - 分时点亮各位显示器
    - 亮度与导通电流有关，也与点亮与熄灭的时间比例有关
    - 可以通过将段选位并联由IO控制

### 键盘及接口

- 编码键盘
    - 由硬件识别键的闭合
- 未编码键盘
    - 由软件识别键的闭合

#### 抖动

由于键盘的机械弹性开关引起，时间一般为5~20ms

按下 -> 放开

前沿抖动 -> 闭合稳定 -> 后沿抖动 -> 释放稳定

- RS触发器消抖电路

#### 获取键状态

- CPU空闲时扫描键盘
- 定时扫描键盘
- 中断方式扫描键盘

## 微型打印机接口