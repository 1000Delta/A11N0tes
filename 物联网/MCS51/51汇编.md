# MCS-51 汇编

## 伪指令

```assembly
ORG 1000H
DB 100H,101H
DW 1000H
VAR EQU 1000H
DS 08H
P11 BIT P1.1
DPTRA DATA 0AA00H ;
END ;代码结束伪指令
```



## 寻址方式

- 寄存器寻址

- 直接寻址

- 间接寻址

- 相对寻址

- 位寻址

- 立即寻址

- 页面寻址

  使用 R0 R1 作为地址指针访问片外RAM

  页面地址由 P2 决定

  ```assembly
  MOV P2,#0A0H ;选定数据页
  MOV R0,#01H ;选定页内地址
  MOV A,#10H
  MOVX @R0,A
  ```

程序存贮器：只能采用**立即寻址**和**基寄存器加变址寄存器间接寻址**

特殊功能寄存器空间：只能采用**直接寻址**方式，不能采用**寄存器间接寻址**

内部RAM高128B：只能使用**寄存器间接寻址**方式，不能采用**直接寻址**

内部RAM低128B：既能采用**寄存器间接寻址**又能采用**直接寻址**

外部扩展数据存贮器：只能采用MOVX指令访问

## 指令系统

- 42种助记符
- 33中操作功能
- 111中指令

### 数据传送类

一般是源操作数不改变，目的操作数修改为源操作数

MOV, MOVX, MOVC, XCH, XCHD, SWAP, POP, PUSH

```assembly
;以寄存器A为目的操作数的指令
MOV A,R6
MOV A,70H
MOV A,@R0
MOV A,#78H
;以Rn为目的操作数的指令（寄存器R0～R7）

;以直接寻址的单元为目的操作数的指令
MOV direct,A
MOV direct,Rn
MOV direct1,direct2
MOV direct,@Ri
MOV direct,#data
;以间接地址为目的操作数的指令（@R0,@R1）
MOV @Ri,A
MOV @Ri,direct
MOV @Ri,#data
;16位数据传送指令（将16位数据传入数据指针DPTR，高8位进入DPH，低8位进入DPL）

```

#### MOVX

访问外部存储器

与外部数据存储器通信需要通过A寄存器来进行

```assembly
MOVX A,@DPTR
MOVX A,@RI
MOVX @DPTR,A
MOVX @Ri,A
```

#### PUSH

压栈指令

```assembly
PUSH Direct
```

- 堆栈指针`SP`+1
- 然后把直接地址的内容送到栈指针寻址的内部RAM单元中

#### POP

出栈指令

- 堆栈指针寻址的内容送到直接地址指出的内部RAM字节单元中
- 堆栈指针`SP`-1

#### XCH XCHD SWAP

交换指令

XCH 字节交换指令

XCHD 半字节交换指令

SWAP 累加器A自身半字节交换指令，交换高4位与低4位



### 算数运算类

执行结果将会使进位`CY`，辅助进位`AC`，溢出`OV`标志置位或复位，但加1和减1不影响以上标志

ADD, ADDC, SUBB, DA, INC, DEC, MUL, DIV

#### ADD

加法运算

#### ADDC

带进位加法

若上一次计算有进位（`CY`=1）则额外加一

#### SUBB

带进位减法

#### INC

增量指令（+1） 

#### DA

十进制调整指令

对累加器中由上一条加法指令所获得的8位结果进行调整，使其为压缩的BCD码的和数 

