# 位域

> 把一个字节中的二进位划分为几个不同的区域，并说明每个区域的位数。每个域有一个域名，允许在程序中按域名进行操作。位域也常称为**位段**

## 位域的声明

```C
struct 位域结构名
{
    类型说明符 位域名:位域长度;
}；
```

示例：

```C
struct btest
{
    int a:4;
    int b:1;
    int c:3;
}
```

## 位域变量的声明

与struct变量、union变量、enum变量相似

- 声明位域时，同时声明位域变量：

    ```C
    struct btest
    {
        int a:4;
        int b:1;
        int c:3;
    }data;
    ```

- 先声明位域，再声明位域变量：

    ```C
    struct btest
    {
        int a:4;
        int b:1;
        int c:3;
    };
    btest data;
    ```

- 直接声明位域变量：

    ```C
    struct
    {
        int a:4;
        int b:1;
        int c:3;
    }data;
    ```

### 声明的注意事项

- 声明位域时，在位域体内可以省略一个或多个位域名，即为**空域**。*这种空域只能用来作填充或调整位置，而不能在程序中使用。*

    ```C
    struct
    {
        int a:1;
        int:3;     //该三位不能使用，为空域
        int b:2;
        int c:2;
    };
    ```

- 一个位域必须存储在同一个字节中，不能跨两个字节。如果一个字节所剩空间不够存放另一个位域时，应采用空位域避开，而从下一单元起存放该位域。有时也可以有意使某位域从下一单元开始。

    ```C
    struct
    {
        unsigned a:4;
        unsigned:0;     //空域 
        unsigned b:6;   //从下一个字节开始存放
        unsigned c:2;
    }
    ```

- 由于位域不允许跨两个字节，因此每个位域的长度不能大于一个字节，即不能超出8位二进制位。

位域在本质上就是一种结构类型，不过其成员是按二进制位进行分配存储的。

## 位域变量的使用

一般形式：

```C
位域变量名.位域名
```

位域指针：

```C
位域指针名->位域名
```