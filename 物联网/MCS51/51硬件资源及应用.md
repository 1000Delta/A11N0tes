# MCS-51硬件资源及应用

## 并行 I/O 口

### 端口

### 应用

## 中断系统

### 中断概述

### 中断系统与控制

### 中断响应

### 中断请求的撤除

### 中断系统的初始化

### 单步工作方式

### 外部中断源的扩展

## 定时器 / 计数器

### 方法概述

### 定时器 / 计数器的定时和计数功能

### 控制寄存器

### 工作方式

### 初始化

### 应用实例

#### 中断方式

定时器/计数器的溢出中断是内部中断源，可以使用中断来进行异常处理。

```c

```

#### 查询方式

通过对标志位进行轮询来获取定时器状态

```c
#include <reg51.h>

sbit P1_0 = P1 ^ 0;

void main (void) {
    
    TMOD &= 0x0f; // 设置 T1 为 工作方式0，且不影响 T0 工作
    // 设置计数初值，为 cf3 = 3315
    TH1 = 0xfc;
    TL1 = 0x03;
    IE = x00; // 关闭中断
    TR1 = 1; // 启动定时器1
    for(;;) {
        
        if (TF1) { // 查询标志位
            
            TF1 = 0; // 清除标志位
            TH1 = 0xfc; // 重置初值
            TL1 = 0x03;
            P1_0 = ~P1_0;
        }
    }
}
```

## 串行接口及其串行通信

### 串行通信基础

- 数据按位顺序进行，最少只需一根数据线即可完成，成本低但速度慢

#### 异步串行通信的字符格式

1. 起始位 开始一个字符的标志位。起始位使数据线处于`0`状态
2. 数据位 
3. 奇偶校验位
4. 停止位
5. 位时间
6. 帧（frame）

#### 信号形式

1. 近程通信
2. 远程通信

#### 数据通路形式

1. 单工
2. 半双工
3. 全双工

#### 数据通信速率

每秒钟传输格式为的数目来表示，称为波特率（baud rate）

1 波特 = 1 bps